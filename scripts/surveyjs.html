<div id="surveyContainer" class="card-content"></div>
<script>
    Survey.StylesManager.applyTheme("modern");
    var surveyJSON = {
        "logoPosition": "right", "pages": [{ "name": "page1", "elements": [{ "type": "dropdown", "name": "DropDownQ1", "title": "What are you reporting?", "isRequired": true, "defaultValue": "help", "choices": [{ "value": "help", "text": "I'm not sure " }, { "value": "RG_strobe_case_control", "text": "Observational, case-control study" }, { "value": "RG_care", "text": "Case report or case series" }, { "value": "RG_strobe_cohort", "text": "Observational, cohort study" }, { "value": "RG_strobe_cross_sectional", "text": "Observational, cross sectional study" }, { "value": "RG_stard", "text": "Diagnostic test accuracy study" }, { "value": "RG_cheers", "text": "Economic evaluation of health interventions" }, { "value": "RG_strega", "text": "Genetic association study" }, { "value": "RG_moose", "text": "Meta-analysis of observational studies" }, { "value": "RG_tripod", "text": "Prediction model development or validation" }, { "value": "RG_prisma-p", "text": "Protocol for a systematic review and meta-analysis" }, { "value": "RG_srqr", "text": "Qualitative study" }, { "value": "RG_squire", "text": "Quality improvement in health care" }, { "value": "RG_consort", "text": "Randomised trial" }, { "value": "RG_spirit", "text": "Randomised trial protocol" }, { "value": "RG_arrive", "text": "Research involving laboratory animals" }, { "value": "RG_prisma", "text": "Systematic review" }], "hasNone": true, "noneText": "None of these" }] }, { "name": "page2", "elements": [{ "type": "radiogroup", "name": "Article Type", "visibleIf": "{DropDownQ1} = 'help'", "title": "What kind of article are you writing?", "valueName": "article_type", "isRequired": true, "requiredIf": "{DropDownQ1} = 'help'", "choices": [{ "value": "research", "text": "Research" }, { "value": "protocol", "text": "Protocol or methods article" }, { "value": "case_report", "text": "Clinical case report" }, { "value": "systematic_review", "text": "Systematic review" }], "hasOther": true }, { "type": "radiogroup", "name": "question2", "visibleIf": "{article_type} = 'systematic_review'", "title": "Did you include a meta-analysis of observational research?", "requiredIf": "{article_type} = 'systematic_review'", "choices": [{ "value": "RG_moose", "text": "Yes" }, { "value": "RG_prisma", "text": "No" }] }, { "type": "radiogroup", "name": "question3", "visibleIf": "{article_type} = 'protocol'", "title": "What type of study is planned?", "valueName": "is_protocol", "requiredIf": "{article_type} = 'protocol'", "choices": [{ "value": "RG_prisma-p", "text": "Systematic review" }, { "value": "RG_spirit", "text": "Clinical trial" }], "hasOther": true }, { "type": "radiogroup", "name": "population", "visibleIf": "{article_type} = 'research'", "title": "Where is the data from?", "requiredIf": "{article_type} = 'research'", "choices": [{ "value": "people", "text": "People" }, { "value": "RG_arrive", "text": "Laboratory animals" }], "hasOther": true }, { "type": "radiogroup", "name": "is_qualitative", "visibleIf": "{population}='people'", "title": "Did you exclusively use qualitative research methods such as interviews and focus groups?", "requiredIf": "{population}='people'", "choices": [{ "value": "RG_srqr", "text": "Yes" }, { "value": "no", "text": "No" }] }, { "type": "radiogroup", "name": "quant_type", "visibleIf": "{is_qualitative}='no'", "title": "What are you investigating?", "requiredIf": "{is_qualitative}='no'", "choices": [{ "value": "RG_cheers", "text": "Financial costs of healthcare" }, { "value": "RG_squire", "text": "A new healthcare service or system" }, { "value": "RG_tripod", "text": "A new prognostic or diagnostic model" }, { "value": "factors", "text": "Factors affecting health" }, { "value": "treatment_or_test", "text": "A treatment or diagnostic test" }], "hasNone": true, "noneText": "None of these" }, { "type": "radiogroup", "name": "is_genetic", "visibleIf": "{quant_type}='factors'", "title": "Are you looking at genetic factors?", "requiredIf": "{quant_type}='factors'", "choices": [{ "value": "RG_strega", "text": "Yes" }, { "value": "item2", "text": "No" }] }, { "type": "radiogroup", "name": "treatment_or_test", "visibleIf": "{quant_type}='treatment_or_test'", "title": "What are you investigating?", "requiredIf": "{quant_type}='treatment_or_test'", "choices": [{ "value": "treatment", "text": "Medical treatment" }, { "value": "RG_stard", "text": "Diagnostic test" }] }, { "type": "radiogroup", "name": "two_or_more_groups", "visibleIf": "{treatment_or_test}='treatment'", "title": "Were two or more groups compared?", "requiredIf": "{treatment_or_test}='treatment'", "choices": [{ "value": "yes", "text": "Yes" }, { "value": "no", "text": "No" }] }, { "type": "radiogroup", "name": "treatment_study_design", "visibleIf": "{two_or_more_groups} = 'yes'", "title": "What was the study design?", "description": "In experimental research, researchers control allocation of people to groups. \n\nIn observational research, groups are determined by the normal course of life or treatment.", "requiredIf": "{two_or_more_groups} = 'yes'", "choices": [{ "value": "RG_consort", "text": "Experimental" }, { "value": "observational", "text": "Observational" }] }, { "type": "radiogroup", "name": "observational_type", "visibleIf": "{is_genetic} = 'item2' or {two_or_more_groups} = 'no' or {treatment_study_design} = 'observational'", "title": "What best describes your work?", "description": "In a cross-sectional study, data is collected from one or more groups at a specific point in time.\n \nIn a cohort study, one or more groups are monitored over a span of time. \n\nIn a case-control study, people with or without a condition (e.g. diabetes) are compared in relation to past events.", "requiredIf": "{is_genetic} = 'item2' or {two_or_more_groups} = 'no' or {treatment_study_design} = 'observational'", "choices": [{ "value": "RG_strobe_case_control", "text": "Case-control" }, { "value": "RG_strobe_cohort", "text": "Cohort study" }, { "value": "RG_strobe_cross_section", "text": "Cross-sectional study" }], "hasNone": true }] }], "triggers": [{ "type": "runexpression" }], "showPageTitles": false, "showCompletedPage": false, "navigateToUrl": '{{ results_url }}', "navigateToUrlOnCondition": [{}]
    };
    function sendDataToServer(survey) {
        //send Ajax request to your web server
        $.ajax({
            url: "{{ url_for('submissions.post_reporting_requirements', hashid=hashid, token=token, _external=True, _scheme='http' if config['DEVELOPMENT'] else 'https')}}",
            type: "POST",
            data: JSON.stringify(survey.data),
        });
    };
    var survey = new Survey.Model(surveyJSON);
    survey.completeText = 'Continue';
    $("#surveyContainer").Survey({
        model: survey,
        onComplete: sendDataToServer
    });
</script>